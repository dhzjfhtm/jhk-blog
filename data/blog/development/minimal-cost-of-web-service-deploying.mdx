---
title: '최소한의 비용으로 운영하는 Web Service'
date: '2023-10-07'
tags: ['Web Service', 'Docker', 'GitHub Actions', 'AWS', 'Azure', 'GCP']
draft: false
summary: ''
---

# Web Service를 최소한의 비용으로 운영한다면

웹 서비스를 이용하려고 하는 사람이라면 그 운영비를 생각해 보기 마련이다. 서비스를 구축하는 목적과 사용자 층의 특성 및 숫자, 서비스의 유지비 설정등이 어떤 아키텍쳐로 서비스를 구축을 할지 결정하게 된다. 사람마다 천차만별인 상황과 요구사항을 고려하면 모든 상황에 맞는 솔루션을 찾기는 어렵다.

이번 포스트에서는 비용 효율성과 확장성을 중요시하는 서비스를 구축하는 방법에 대해 알아보고자 한다. 서비스를 구축하는 사람중에서 많은 사용자를 모으는 것이 목표이거나 영리적 목적을 가지고 운영을 하는 경우 서비스의 운영규모가 커지는 것을 염두해 두어야 할 것이다. 개발자 편의성을 높인 여러 제품들을 사용하는 경우 초기비용이 적고 시간을 거의 사용하지 않고 빠르게 시작할 수 있는 장점이 있지만 사용자가 늘어날 수록 비용이 큰 기울기로 증가하는 경향이 있다. 그런 제품들을 만드는 회사가 이익을 벌어들이는 방식이므로 시간과 기민함이 중요하다면 고려할만 하다.

그러나 서비스의 규모가 커지면서 비용이 증가하는 것을 고려해야 한다면 다른 방법을 고려해야 한다. 흔히 비용을 줄이는 방식에는 개발자가 많은 시간을 투자하는 것이 요구된다. 개발자의 시간도 많은 비용이므로 이를 줄이는 방법을 고민해야 한다. 내가 최소한의 시간과 노력으로 비용을 줄이는 방법을 고민해 봤고 현재로서는 다음의 방식이 효율적이라고 생각된다.

## Docker, GitHub Actions, AWS(or Azure, GCP)

### Docker

Docker로 배포하는 것들에는 크게 제한이 없다. 데이터베이스, 웹서버, 프론트엔드 리소스, 리얼타임 서버 등등 다양한 것들을 Docker로 배포할 수 있다. Docker가 무엇이고 장점인지는 각설하고 Docker를 사용하는 이유는 다음과 같다.

1. 배포의 편의성
2. 배포의 안정성

일반적으로 대부분의 프레임워크나 솔루션은 Docker를 이용한 배포방법을 공식적으로 소개하는 경우가 많다. 공식이 아니더라도 그 방법을 찾는 것은 어렵지 않다. Dockerfile, docker-compose.yml을 받거나 작성하여 배포하는 과정은 일반적으로 어렵지 않으며 Troubleshooting도 수월하게 진행할 수 있다.

### GitHub Actions

GitHub Actions는 GitHub에서 제공하는 CI/CD 서비스이다. 사실 필수는 아니라고 생각하는데 그래도 시간의 절약이 있고 실수를 방지한다는 측면에서 추천한다. 이 서비스는 GitHub에서 제공하는 서비스이기 때문에 연동성과 신뢰성이 높다. GitHub Actions를 사용하는 이유는 다음과 같다.

1. GitHub에서 공식적으로 제공하는 서비스의 안정성
2. 시간과 비용을 절약할 수 있는 편의성을 제공

매번 업데이트된 리소스를 배포할때 마다 docker build, docker push, docker pull, docker run 등의 명령어를 수행하는 것은 매우 번거롭다. 사실 직접해도 되는데 매번 하기는 귀찮으니까. Github Actions를 어떻게 실행할지 정의하는 yml 파일을 작성하면 GitHub에서 자동으로 배포를 진행해 준다. 이것도 일반적으로 제공하는 자료가 많으며 사용법을 배우는 것도 아주 어렵지 않다. 정 어려우면 복사 붙여넣기를 하던가 stackoverflow를 들어가던가 ChatGPT에 물어보든가 하면 된다. 이 과정은 한번만 하면 되기 때문에 시간을 절약에 도움이 된다.

### AWS(or Azure, GCP)

EC2, Virtual Machine등의 Raw Cloud Computing을 사용하는 것이 사실 비용효율성 달성의 핵심이다. 추가적인 서비스가 붙을 수록 비용은 점점 효율성이 떨어지게 된다. 가장 Raw 한 것을 사용하면 비용은 최소한으로 사용할 수 있게 된다. 사실 Docker, GitHub Actions는 모두 이 Raw 한 클라우드 서비스를 이용하기 위한 수단이다. 이 3가지를 모두 사용할 수 있다면 비용을 줄이는 것은 물론 거의 대부분의 스케일에 대응할 수 있는 높은 수준의 배포가 가능하다.

### 그러나 클라우드 제공업체의 서비스도 훌륭하다

AWS Lambda, AWS Amplify, Azure App Angine. 이런 서비스 들은 비용 효율성이나 이런 측면에서 아주 열등한 측면을 보이지는 않는다 비용이 증가하지만 시간의 절약을 생각하면 충분히 좋은 선택이라고 할 수 있다. 그러나 이 서비스에 여러 숨겨진 정보나 제한 사항들이 있을 수 있고 러닝커브가 발생할 수 있으며 플랫폼에 종속이 되는 것도 일부 우려를 할 수 도있다. 그러나 이런 서비스들은 비용을 줄이는 것이 목적이 아니라면 충분히 좋은 선택이 될 수 있다. 시간은 곧 비용이고 언제나 사용자의 요구사항이 선택의 기준이 되어야 한다.

## 결론

현재 나는 블로그, 서비스 소개 웹사이트등에는 Vercel, Netlify, Supabase, Firebase의 여러 서비스를 적극적으로 사용하고 있다. 지금까지 비용효율적인 Docker, GitHub Actions, AWS EC2를 이용하라는 이야기는 무슨 말이었냐 말할 수 있지만 이것을 사용하는 서비스는 상업용이거나 트래픽이 성장을 예상한 것들에만 적용되었다. 블로그, 서비스 소개 웹사이트등의 라이트 하고 트래픽이 적은 것들에는 위 3가지를 구축하기에는 그만한 시간대비 비용의 절약이 거의 없고 오히려 손해이다. 트래픽이 증가하는 것을 고려한 서비스는 위 3가지를 적용하고 있기는 하지만 솔직히 서비스의 현재 규모에 비하면 약간 오버 테크놀로지의 느낌은 있다. 그러나 사람은 언제나 기회에 대비하라는 말이 있지 않은가. 준비된 자가 기회를 잡는다. 웹 서비스에서 준비란 성장에 대비하는 것이고 그때가 오면 서비스 확장에 당황하지 않고 대응할 수 있어야 한다. 기회가 온 순간은 찰나이고 그때 사업적 판단은 정말로 중요할 것이다. 스케일 확장에 시간 뺏기지 않고 그 시간에 현명한 판단하기를 바란다.
